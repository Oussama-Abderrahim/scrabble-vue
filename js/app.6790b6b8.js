(function(e){function t(t){for(var s,o,c=t[0],a=t[1],i=t[2],h=0,u=[];h<c.length;h++)o=c[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);d&&d(t);while(u.length)u.shift()();return l.push.apply(l,i||[]),r()}function r(){for(var e,t=0;t<l.length;t++){for(var r=l[t],s=!0,c=1;c<r.length;c++){var a=r[c];0!==n[a]&&(s=!1)}s&&(l.splice(t--,1),e=o(o.s=r[0]))}return e}var s={},n={app:0},l=[];function o(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=s,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(r,s,function(t){return e[t]}.bind(null,s));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var d=a;l.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var s=r("85ec"),n=r.n(s);n.a},"56d7":function(e,t,r){"use strict";r.r(t);var s=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("game-board")],1)},l=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.loading?r("div",{staticClass:"d-flex justify-content-center loader",attrs:{id:"loader"}},[e._m(0),e._m(1)]):r("div",{staticClass:"container"},[r("div",{staticClass:"score-row"},[r("h1",[e._v("SCRABBLE")]),r("h3",[e._v(e._s(e.currentPlayer.name)+"'s turn")])]),r("div",{staticClass:"game"},[r("div",{staticClass:"game-player-one"},[r("h2",[e._v(e._s(e.players[0].name))]),r("h3",[e._v("Score : "+e._s(e.players[0].score))]),r("ul",{staticClass:"game-palette"},e._l(e.players[0].hand,(function(t,s){return r("li",{key:s,staticClass:"cell",class:{locked:e.currentPlayer!=e.players[0],pending:e.currentPlayer==e.players[0]&&s==e.selectedHandIndex},on:{click:function(t){return e.onHandClick(0,s)}}},[e._v(e._s(t))])})),0)]),r("div",{staticClass:"game-board"},e._l(e.board,(function(t,s){return r("div",{key:s,staticClass:"row"},e._l(e.board[s],(function(t,n){return r("div",{key:15*s+n,staticClass:"cell",class:{selected:t.selected,pending:t==e.selectedBoardCell,locked:t.isLocked,"start-cell":t.effect==e.EFFECTS.START,"triple-word":t.effect==e.EFFECTS.TRIPLE_WORD,"triple-letter":t.effect==e.EFFECTS.TRIPLE_LETTER,"double-word":t.effect==e.EFFECTS.DOUBLE_WORD,"double-letter":t.effect==e.EFFECTS.DOUBLE_LETTER},on:{click:function(t){return e.onBoardClick(s,n)}}},[e._v(e._s(e.board[s][n].content))])})),0)})),0),r("div",{staticClass:"game-player-two"},[r("h2",[e._v(e._s(e.players[1].name))]),r("h3",[e._v("Score : "+e._s(e.players[1].score))]),r("ul",{staticClass:"game-palette"},e._l(e.players[1].hand,(function(t,s){return r("li",{key:s,staticClass:"cell",class:{locked:e.currentPlayer!=e.players[1],pending:e.currentPlayer==e.players[1]&&s==e.selectedHandIndex},on:{click:function(t){return e.onHandClick(1,s)}}},[e._v(e._s(t))])})),0)])]),r("button",{on:{click:function(t){return e.cancel()}}},[e._v("Clear")]),r("button",{on:{click:function(t){return e.validate()}}},[e._v("Validate")])])},c=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loader-dots"},[r("div",{staticClass:"loader-dots-dot dot1"}),r("div",{staticClass:"loader-dots-dot dot2"}),r("div",{staticClass:"loader-dots-dot dot3"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loader-text"},[r("h5",[e._v("Loading dictionnary...")])])}],a=r("2ef0"),i=r.n(a);const d=" ",h=4,u=3,f=2,p=1,y=5,C=0,E=[[h,C,C,p,C,C,C,h,C,C,C,p,C,C,h],[C,f,C,C,C,u,C,C,C,u,C,C,C,f,C],[C,C,f,C,C,C,f,C,f,C,C,C,f,C,C],[p,C,C,f,C,C,C,f,C,C,C,f,C,C,p],[C,C,C,C,f,C,C,C,C,C,f,C,C,C,C],[C,u,C,C,C,u,C,C,C,u,C,C,C,u,C],[C,C,p,C,C,C,p,C,p,C,C,C,p,C,C],[h,C,C,p,C,C,C,y,C,C,C,p,C,C,h],[C,C,p,C,C,C,p,C,p,C,C,C,p,C,C],[C,u,C,C,C,u,C,C,C,u,C,C,C,u,C],[C,C,C,C,f,C,C,C,C,C,f,C,C,C,C],[p,C,C,f,C,C,C,f,C,C,C,f,C,C,p],[C,C,f,C,C,C,f,C,f,C,C,C,f,C,C],[C,f,C,C,C,u,C,C,C,u,C,C,C,f,C],[h,C,C,p,C,C,C,h,C,C,C,p,C,C,h]],v={A:{count:9,score:1,letter:"A"},B:{count:2,score:3,letter:"B"},C:{count:2,score:3,letter:"C"},D:{count:4,score:2,letter:"D"},E:{count:12,score:1,letter:"E"},F:{count:2,score:4,letter:"F"},G:{count:3,score:2,letter:"G"},H:{count:2,score:4,letter:"H"},I:{count:9,score:1,letter:"I"},J:{count:1,score:10,letter:"J"},K:{count:1,score:5,letter:"K"},L:{count:4,score:1,letter:"L"},M:{count:2,score:3,letter:"M"},N:{count:6,score:1,letter:"N"},O:{count:8,score:1,letter:"O"},P:{count:2,score:3,letter:"P"},Q:{count:1,score:10,letter:"Q"},R:{count:6,score:1,letter:"R"},S:{count:4,score:1,letter:"S"},T:{count:6,score:1,letter:"T"},U:{count:4,score:1,letter:"U"},V:{count:2,score:4,letter:"V"},W:{count:2,score:4,letter:"W"},X:{count:1,score:8,letter:"X"},Y:{count:2,score:4,letter:"Y"},Z:{count:1,score:10,letter:"Z"}};var b={name:"GameBoard",data:()=>({EFFECTS:{DOUBLE_LETTER:p,DOUBLE_WORD:f,TRIPLE_LETTER:u,TRIPLE_WORD:h,START:y},loading:!0,board:[],lettersDeck:[],waiting:!1,players:[{name:"Player 1",hand:[],score:0},{name:"Player 2",hand:[],score:0}],wordsDict:[],currentPlayer:null,selectedBoardCell:null,selectedHandIndex:-1}),methods:{applyToBoard(e){this.board.forEach(t=>t.forEach(e))},hasAdjacentCell(e){return e.i>0&&this.board[e.i-1][e.j].isLocked||e.i<this.board.length-1&&this.board[e.i+1][e.j].isLocked||e.j>0&&this.board[e.i][e.j-1].isLocked||e.j<this.board[e.i].length-1&&this.board[e.i][e.j+1].isLocked},getSelectedCells(){var e=[];return this.applyToBoard(t=>{t.selected&&t.content!=d&&e.push(t)}),e},getSelectedCellsAlignement(e){if(this.board[e[0].i][e[0].j].effect!=this.EFFECTS.START&&!e.some(e=>this.hasAdjacentCell(e)))return!1;const t=(t,r)=>(0==r||this.board[t.i][t.j-1].content!=d)&&t.i==e[0].i,r=(t,r)=>(0==r||this.board[t.i-1][t.j].content!=d)&&t.j==e[0].j;return e.every(t)?"horizontal":!!e.every(r)&&"vertical"},_getVerticalWord(e,t){const r=e.j;let s=e.i,n="";while(s>0&&t[s][r].content!=d)s--;s++;while(s<t.length&&t[s][r].content!=d)n+=t[s][r].content,s++;return n},_getHorizontalWord(e,t){const r=e.i;let s=e.j,n="";while(s>0&&t[r][s].content!=d)s--;s++;while(s<t[r].length&&t[r][s].content!=d)n+=t[r][s].content,s++;return n},getFormedWords(e,t,r){let s=[],n="horizontal"==t?this._getHorizontalWord(e[0],r):this._getVerticalWord(e[0],r);n.length>1&&s.push(n);for(let l of e)n="horizontal"==t?this._getVerticalWord(l,r):this._getHorizontalWord(l,r),n.length>1&&s.push(n);return s},validate(){let e=this.getSelectedCells(),t=this.getSelectedCellsAlignement(e),r="horizontal"==t||"vertical"==t,s=r?this.getFormedWords(e,t,this.board):[],n=s.every(e=>!!this.wordsDict[e.toLowerCase()]);console.log(t,r,s),r&&n?(this.applyToBoard(e=>{e.selected&&e.content!=d&&(e.isLocked=!0,e.selected=!1)}),this.computeScore(s,e),this.nextTurn(),this.fillHands()):this.cancel()},computeScore(e,t){let r=0;for(let s of e)for(let e of s)r+=v[e].score;for(let s of t)switch(s.effect){case this.EFFECTS.DOUBLE_LETTER:r+=v[s.content].score;break;case this.EFFECTS.TRIPLE_LETTER:r+=2*v[s.content].score;break}for(let s of t)switch(s.effect){case this.EFFECTS.START:case this.EFFECTS.DOUBLE_WORD:r+=e[0].split("").map(e=>v[e].score).reduce((e,t)=>e+t);break;case this.EFFECTS.TRIPLE_WORD:r+=2*e[0].split("").map(e=>v[e].score).reduce((e,t)=>e+t);break}this.currentPlayer.score+=r},nextTurn(){this.currentPlayer=this.currentPlayer==this.players[0]?this.players[1]:this.players[0]},cancel(){this.selectedBoardCell=null,this.waiting=!1,this.applyToBoard(e=>{e.selected&&e.content!=d&&(this.currentPlayer.hand.push(e.content),e.content=d,e.selected=!1),e.selected=!1})},insertLetter(){this.selectedBoardCell.content!=d&&this.currentPlayer.hand.push(this.selectedBoardCell.content),this.selectedBoardCell.content=this.currentPlayer.hand[this.selectedHandIndex],this.currentPlayer.hand.splice(this.selectedHandIndex,1),this.selectedBoardCell=null,this.selectedHandIndex=-1},onHandClick(e,t){this.players[e]==this.currentPlayer&&(this.selectedHandIndex=t,this.selectedBoardCell&&this.selectedHandIndex>-1&&this.insertLetter())},onBoardClick(e,t){if(!this.board[e][t].isLocked){if(this.selectedBoardCell&&this.board[e][t].selected&&this.board[e][t].content!=d&&(this.currentPlayer.hand.push(this.board[e][t].content),this.board[e][t].content=d),this.selectedHandIndex>-1)return this.selectedBoardCell=this.board[e][t],this.selectedBoardCell.selected=!0,void this.insertLetter();this.selectedBoardCell&&(this.selectedBoardCell.selected=!1,this.board[e][t]==this.selectedBoardCell&&this.selectedBoardCell.content==d)?this.selectedBoardCell=null:(this.selectedBoardCell=this.board[e][t],this.selectedBoardCell.selected=!0)}},initGameBoard(){const e=(e,t)=>{const r=Object.keys(this.EFFECTS).find(r=>this.EFFECTS[r]==E[e][t])||null;return this.EFFECTS[r]};this.board=Array(15).fill([]).map((t,r)=>Array(15).fill({}).map((t,s)=>({i:r,j:s,content:d,effect:e(r,s),isLocked:!1,selected:!1})))},generateLettersDeck(){this.lettersDeck=[],console.log(v);for(let e in v)this.lettersDeck=this.lettersDeck.concat(Array(v[e].count).fill(" ").map(t=>v[e].letter));this.lettersDeck=i.a.shuffle(this.lettersDeck)},fillHands(){for(let e of this.players)while(e.hand.length<7)e.hand.push(this.lettersDeck.pop())}},beforeMount(){this.loading=!0,this.currentPlayer=this.players[0],this.initGameBoard(),this.generateLettersDeck(),this.fillHands(),this.cancel(),fetch("words_dictionary.json").then(e=>e.json()).then(e=>{console.log(e),this.wordsDict=e,this.loading=!1})}},_=b,g=(r("eb94"),r("2877")),T=Object(g["a"])(_,o,c,!1,null,"19e57c38",null),m=T.exports,k={name:"App",components:{GameBoard:m}},B=k,L=(r("034f"),Object(g["a"])(B,n,l,!1,null,null,null)),S=L.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(S)}}).$mount("#app")},"77ad":function(e,t,r){},"85ec":function(e,t,r){},eb94:function(e,t,r){"use strict";var s=r("77ad"),n=r.n(s);n.a}});
//# sourceMappingURL=app.6790b6b8.js.map